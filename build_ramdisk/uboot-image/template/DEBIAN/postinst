#!/bin/sh
# preinst script for easyblockssync
#
# see: dh_installdeb(1)

#set -e

. /etc/default/openblocks

case "$1" in
configure)
	[ -f /.chroot ] && exit 0
	if [ -e /etc/init.d/easyblockssync ]; then
		/usr/sbin/update-rc.d uboot-image defaults
		/etc/init.d/uboot-image start
	elif [ -f /etc/mtd0.data ]; then
		if /etc/init.d/uboot-image start; then
			rm -f /etc/mtd0.data
			rm -f /etc/mtd1.data
			rm -f /etc/mtd1_java.data
			rm -f /etc/mtd2.data
		else
			exit 1
		fi
	fi
;;

abort-upgrade|abort-remove|abort-deconfigure)
;;

*)
echo "postinst called with unknown argument \`$1'" >&2
exit 1
;;
esac



# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
